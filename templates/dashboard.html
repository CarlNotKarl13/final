{% extends 'base.html' %}

{% block content %}
{% for message in get_flashed_messages() %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
{% endfor %}

    <h1>Dashboard</h1>
    <p>You are logged in.</p>
<div class="shadow-lg p-3 mb-5 bg-body-tertiary rounded">
  <div class="card">
    <div class="card-header">
      {{ current_user.name }}
    </div>
    <div class="card-body">
      <h5 class="card-title">Welcome to your user page:</h5>

        <div class="container">
          <div class="row">
            <div class="col-md-8">
              
        <p class="card-text"><strong>Name:</strong>{{ current_user.name }}<br/>
        <strong>Username:</strong>{{ current_user.username }}<br/>
        <strong>User ID:</strong>{{ current_user.id }}<br/>
        <strong>Email:</strong>{{ current_user.email }}<br/>
        <strong>Date Joined:</strong>{{ current_user.date_added }}<br/>
        <strong>profile_pic:</strong>{{ current_user.profile_pic }}<br/></p>
      <a href="{{ url_for('logout')}}" class="btn btn-secondary">Logout</a>
      <a href="{{url_for('update',id=current_user.id)}}" class="btn btn-secondary">Update profile</a>
      
  </div>
  <div class="col-4">
    <img src="{{ url_for('static',filename='images/default_profile_pic.png') }}" class="img-responsive" width="150" align="right">
    </div>
    </div>
    </div>
  </div>
<br/> 
<div class="card">
<div class="card-header">Add profile pic</div>
<div class="card-body">
<div class="shadow-lg p-3 mb-5 bg-body-tertiary rounded">
  <form action="/update/{{ name_to_update.id }}" method="post" enctype="multipart/form-data">
      {{ form.hidden_tag() }}
      {{ form.name.label(class="form-label") }}
      {{ form.name(class="form-control",value=name_to_update.name) }}
      <br />
      {{ form.username.label(class="form-label") }}
      {{ form.username(class="form-control",value=name_to_update.username) }}
      <br />
      {{ form.email.label(class="form-label") }}
      {{ form.email(class="form-control",value=name_to_update.email) }}
      <br/>
      {{ form.profile_pic.label(class="form-label") }}
      {{ form.profile_pic(class="form-control",value=name_to_update.profile_pic) }}
      <br />
      {{ form.submit(class="btn btn-dark") }}
      <a href="{{url_for('delete',id=id)}}" class="btn btn-danger">Delete</a>
   </form>
</div>
</div>
</div>
</div>

{% endblock %}